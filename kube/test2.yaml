---
apiVersion: v1
kind: Namespace
metadata:
  name: tekton-demo
---
apiVersion: v1
kind: Secret
metadata:
  name: key-for-kube
  namespace: tekton-demo
type: Opaque
data:
  config: YXBpVmVyc2lvbjogdjEKY2x1c3RlcnM6Ci0gY2x1c3RlcjoKICAgIGNlcnRpZmljYXRlLWF1dGhvcml0eS1kYXRhOiBMUzB0TFMxQ1JVZEpUaUJEUlZKVVNVWkpRMEZVUlMwdExTMHRDazFKU1VNdmFrTkRRV1ZoWjBGM1NVSkJaMGxDUVVSQlRrSm5hM0ZvYTJsSE9YY3dRa0ZSYzBaQlJFRldUVkpOZDBWUldVUldVVkZFUlhkd2NtUlhTbXdLWTIwMWJHUkhWbnBOUWpSWVJGUkpNRTFFU1hsUFJFRXlUWHBqTVU1R2IxaEVWRTB3VFVSSmVVNVVRVEpOZW1NeFRrWnZkMFpVUlZSTlFrVkhRVEZWUlFwQmVFMUxZVE5XYVZwWVNuVmFXRkpzWTNwRFEwRlRTWGRFVVZsS1MyOWFTV2gyWTA1QlVVVkNRbEZCUkdkblJWQkJSRU5EUVZGdlEyZG5SVUpCVEU5NENqQTBUbTl1YlZsak9HbGtlVlphTTBSTlVHMVhkVkZUUTBNelUwOHpVVlptVlhCMmJWVlJTRmhCUmtkWVozQkRXbWRNT0ZKeE5XazRiRUpOUldvelVVZ0tVbVYyU2xvNVJrdEVhVTVSVUdsdlp6UnlNRkJzVlhaRkwxRmxhVFZxTldaNFkzcE9Zbk5HU21SUmNVSk5TbUpLVVZaQmNIWk5kSGRTVkROek9FcHNlQXBYTTB0S04wdEZkalIxTVc1VmRTOXRNbXhoWkZvdlVtbHlObkp0YXk5cFVVOXBjVk5UVVRCdVNrOVZZWFZ4SzJoTlZuZFNhRE5FTDJvclpHeG9ZbEZtQ2swek0wdGplSHB0ZW5ab2IyRkZTRXhqV1VaSVJtWXpXRTgzWkhCcGRUaEpVbEl2VVhVMVZYRk9RbFpCTldWRUsyaGhObnBaUkdoSVQySTNiRU4xUVZnS1lsZzRTR3h1T1hocVdYRlBUMHRDT1RCemRqWTRVbmRvWTFoTFNsWlNSV3RLZG5wVVptMWtUazluV0N0WGJWUmFjRlVyZHk5UlJHUk1SelJxVFdjeWFBbzJSRmxTV1dOV2RXVnBSVWx1TVVrM1FVOU5RMEYzUlVGQllVNWFUVVpqZDBSbldVUldVakJRUVZGSUwwSkJVVVJCWjB0clRVRTRSMEV4VldSRmQwVkNDaTkzVVVaTlFVMUNRV1k0ZDBoUldVUldVakJQUWtKWlJVWktlRzEwTkc0eVMwNDJibXMzUzNsM2MwVmplbEpSZEhSVlNtRk5RbFZIUVRGVlpFVlJVVThLVFVGNVEwTnRkREZaYlZaNVltMVdNRnBZVFhkRVVWbEtTMjlhU1doMlkwNUJVVVZNUWxGQlJHZG5SVUpCU2pKTVZGZDJURGhIV0ZwV2FFSkdhelJaUlFwQ2FGSlhWbXhhV2k5Tk4yVk1VRkkwWW5SVE1Va3JZVWhXVTBGdmN6bDZibWw1TlVaYU5FZzRibVpZUjNGU1R6QldORmhrVEdwSVNpdFZTMWt3WVVWYUNrbFZRbEZwVG5sWU1GVm9jblo0V0VWbllXUnFNUzlaUzI0NVRXdFJabUpKY3pad2IxQXZWSGhhUzJaWVNEbGpVbU5DSzFVMmRubGtia1JYZUU5aGVIVUtNalJ5ZG5sb2FsZENORTFxZW5kaGJ5ODFVSFpIYUVrNE5qVjRLemhRWlM5cGVVOXBSRGRNWTBoaFVtRklXVXB6YUc4eWEybHJXRkZ6ZUdacVNtTkxVQXBrV2pkbVNYSlNMMDVhUWxOc1NYbDVkVUV6VURJMlVtNUxTeTl0VXpCdk5rNU9UM051Y0VoVk4xTXJUa1p4Tm1WbVQwSkJNSEl2ZGxsUFJXUm9aa1JTQ25sQlNtRjNTWEpRYkhsWVdHNVRZVzVxZFdaRWN6Vm5USFZLWW1kaFZYVlVTMWRyWldNM2RVcFBRVk5zUlRGblUxVlFTMDVUU1RjNE4zWjRkbnBXTUZBS1QxbEJQUW90TFMwdExVVk9SQ0JEUlZKVVNVWkpRMEZVUlMwdExTMHRDZz09CiAgICBzZXJ2ZXI6IGh0dHBzOi8vbGIua3ViZXNwaGVyZS5sb2NhbDo2NDQzCiAgbmFtZTogY2x1c3Rlci5sb2NhbApjb250ZXh0czoKLSBjb250ZXh0OgogICAgY2x1c3RlcjogY2x1c3Rlci5sb2NhbAogICAgdXNlcjoga3ViZXJuZXRlcy1hZG1pbgogIG5hbWU6IGt1YmVybmV0ZXMtYWRtaW5AY2x1c3Rlci5sb2NhbApjdXJyZW50LWNvbnRleHQ6IGt1YmVybmV0ZXMtYWRtaW5AY2x1c3Rlci5sb2NhbApraW5kOiBDb25maWcKcHJlZmVyZW5jZXM6IHt9CnVzZXJzOgotIG5hbWU6IGt1YmVybmV0ZXMtYWRtaW4KICB1c2VyOgogICAgY2xpZW50LWNlcnRpZmljYXRlLWRhdGE6IExTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVVJKVkVORFFXZHRaMEYzU1VKQlowbEpZeTlqV0hoNVZIbGhTelIzUkZGWlNrdHZXa2xvZG1OT1FWRkZURUpSUVhkR1ZFVlVUVUpGUjBFeFZVVUtRWGhOUzJFelZtbGFXRXAxV2xoU2JHTjZRV1ZHZHpCNVRrUkJlVTFxWjNkT2FrMHpUbFJTWVVaM01IbE9WRUY1VFdwamQwNXFUVE5PVkZKaFRVUlJlQXBHZWtGV1FtZE9Wa0pCYjFSRWJrNDFZek5TYkdKVWNIUlpXRTR3V2xoS2VrMVNhM2RHZDFsRVZsRlJSRVY0UW5Ka1YwcHNZMjAxYkdSSFZucE1WMFpyQ21KWGJIVk5TVWxDU1dwQlRrSm5hM0ZvYTJsSE9YY3dRa0ZSUlVaQlFVOURRVkU0UVUxSlNVSkRaMHREUVZGRlFYSlNRblZTYjAwdk1YRnhWak5LUm1FS09HaE5RamRoZDBObU0yRktLMDVoYkRack5VUkZSVzEzU1d4dlQwWnNhM0ZUT0ZCR1oyOUdkSGRTUVZOaWFXNTNkVkpJUW1zMFJ6TlhNamMxWm1nMFVRcEJjSEJ4YVhaTk15c3liWGhMY25kR1NHdE5RelkwUzFoUmJWRTFkSG92WlV0NFZuWk5RakJzTURGeVltaFVhVzUwVFZoalNWSjRkazVtU2l0S1JHNDJDa2xWYlhSMEwxWlRSVWRrWkZsWlIwZ3dMM1JRVjFGSFF5OWpSbUpvYVcxVlpERmFhRlZzZHpOMmJVNVhZek13YVhaaFNYQlZOazlPUjNWd2NsQjBXVk1LZUVwNU5sZEJWME5HZG1kWFlXVkNhM1IyZFVNM1RYa3JNVEExYzBkVGIyaDBaVmxoVUV0R2RVaGpTRVZRTTFWMmRsUTFWM3B2YkVWc1NHd3haRlV6YXdwbU5XdFVNV2xaY1ROcFNrVmpNbXAwWkRCQlJubFpiblZpWWpkWVlsWjNhWEkyTUVveGJIcE1aMUJsWTNJemJqQnlXbXhNYkZRek4ySTBhV2wxWmpWaENrSkJabWRTZDBsRVFWRkJRbTh4V1hkV1JFRlBRbWRPVmtoUk9FSkJaamhGUWtGTlEwSmhRWGRGZDFsRVZsSXdiRUpCZDNkRFoxbEpTM2RaUWtKUlZVZ0tRWGRKZDBSQldVUldVakJVUVZGSUwwSkJTWGRCUkVGbVFtZE9Wa2hUVFVWSFJFRlhaMEpUWTFweVpVbzVhV3BsY0RWUGVYTnpURUpJVFRCVlRHSldRd3BYYWtGT1FtZHJjV2hyYVVjNWR6QkNRVkZ6UmtGQlQwTkJVVVZCVlV0M1NrTjNXWGgzZW1oc2FFSkRWWFJCVmt0SU9YQjBaMFE0UmtKMmFIVm9OM1U1Q21wbGNUZEVlVGxoVkdSbk5USmpZMEZvVjNKMU4wbEVlakJGUVdaSWRtRm9SMmwzVEV0MGVqWkVVVXREUjFjd2FtaEhSVkJ0WTIxQ2QyUmpiRUZvY0cwS2NHeE9NWEF3UlUxUFNVaHRVbkJ4ZDIxd1FsQkpjU3RSVkRBd1FsaG5UVEZPVFZsWmVXRTFOM1J5YlV3ck1rODNSSEpYTjFjek5td3ZRemR2V21sSFV3cHBZVXBoVEZOa1QxYzVNRWg0YUdsdVVGVmtSRUpLVUZOTlJGRjNOMFV2VEZWa2MyeDZla0pQV25KeE9XTlNZM1ptY2tSWlZrSldVME00UWxOc1ZsQnJDbGh0YW1GVU1WbDNVV2RZV2xWNFMxcGhhVmhHTkVaMU4yeHBXRU5WVlZwSGFWbzRhVWhDV0hoS01ITjRRVGx5UnpGMVRGRkZWRlkzU3paRVUyOXNWMFVLWm5ablZrZ3lkM1J3TVdOa1puVXhSbVZVTXpNdlpHeHVSVXBEVDNSVU1tY3dhRWhTT1U5MmVFOUZkbFoxS3psU2IxRTlQUW90TFMwdExVVk9SQ0JEUlZKVVNVWkpRMEZVUlMwdExTMHRDZz09CiAgICBjbGllbnQta2V5LWRhdGE6IExTMHRMUzFDUlVkSlRpQlNVMEVnVUZKSlZrRlVSU0JMUlZrdExTMHRMUXBOU1VsRmIyZEpRa0ZCUzBOQlVVVkJjbEpDZFZKdlRTOHhjWEZXTTBwR1lUaG9UVUkzWVhkRFpqTmhTaXRPWVd3MmF6VkVSVVZ0ZDBsc2IwOUdiR3R4Q2xNNFVFWm5iMFowZDFKQlUySnBibmQxVWtoQ2F6UkhNMWN5TnpWbWFEUlJRWEJ3Y1dsMlRUTXJNbTE0UzNKM1JraHJUVU0yTkV0WVVXMVJOWFI2TDJVS1MzaFdkazFDTUd3d01YSmlhRlJwYm5STldHTkpVbmgyVG1aS0swcEVialpKVlcxMGRDOVdVMFZIWkdSWldVZElNQzkwVUZkUlIwTXZZMFppYUdsdFZRcGtNVnBvVld4M00zWnRUbGRqTXpCcGRtRkpjRlUyVDA1SGRYQnlVSFJaVTNoS2VUWlhRVmREUm5ablYyRmxRbXQwZG5WRE4wMTVLekV3TlhOSFUyOW9DblJsV1dGUVMwWjFTR05JUlZBelZYWjJWRFZYZW05c1JXeEliREZrVlROclpqVnJWREZwV1hFemFVcEZZekpxZEdRd1FVWjVXVzUxWW1JM1dHSldkMmtLY2pZd1NqRnNla3huVUdWamNqTnVNSEphYkV4c1ZETTNZalJwYVhWbU5XRkNRV1puVW5kSlJFRlJRVUpCYjBsQ1FVSkxNRkYxWWxkRGNFVTVNRWxMVGdwS2VVbG5hMk5ZU2tsR0x6aFNURGhxUnpjeGRVSmxkRGwxTURaTVNYaHBhRkJIVVVJeldtWlZUM3BPZUdSRWVEVjRaVEpMYTB4NFRHVmlRMnhHYzNaa0NtNWxaR0ZJZDJWNllqWndOV0Z6T1hWclRFMU1iRkZaTVVRdmJqVTRVVGQzUmxObVl6UnBOVEpDTHl0SGR6RkVjbkJhZUhoQlprTkhURlJNVFdGWWRYRUtNVWhFUTJ0TlltWXJZVmRUVG14S2VXVkhZV1J6TlRaMkwybE9SV3N2UVhORVlqTmlTRkZPY1ZnM1IwZEVWWFpDUkRVMU9Fa3pibVJLV0ZwMGJXbHhNZ3BUYXpkQ1dtOXlXRTV2V2pOaWJXOWtZblpXUmxnMVlVTkZXSEZzU0ZwMmRGTk9lRXhpY2xKSVpWaE1ObWhSUjBabWVVb3dZbTFQVURsYVVVczVObTFKQ21FMmJ6UlZZbVpwVEhKS1MwNTRZMnBpVTNKUmFGTlhNR05RU0hJM1lWbFlNMGxZY1dFMllYcHBWelpSYzFsTmJVSmpZMlJ6Y21wUVdXNUdVamxGT1hjS1lWSkZUbFJtUlVObldVVkJlRXA2WkdGb2FXVTFWSFJtTUZvM09WbEZRakpuTDJnNGNuUTBkVUpxU0hZclNUSk5XVEl5WWpRNVNUTkRZMkpRTmxGUFdBb3dkVGxUZW1OMlozZG5RakVyV21zck0xRnJSMVJpY21Ga2FFUjJlVmM1Y2tscE4wTnBjVFF5TVhoUmNXb3dkU3RGWW1SR1FXaGFaMVJ3YUhOb2QwRllDbU5OZVZrMGVtSTFiR29yTW01UFpWRnROVkpvWW5KM1dtZHFhRkk0V2taQlpHSTBNVnBSUW5kSksyUlBOVkZ0YTBJM1NEaGtXbXREWjFsRlFUUldZWEVLYVdGV1dWaEpVMWcwWWt4dlJsTlZSMnRvUW5jeGJrVXJaVVJqWkRaNlpUVkRiR2xTV21oTVVFTlFablpEYVRBMFMwYzRhVVpLV1ZONFVHdEVOR0kzTUFwMmRFVTFUR2xQYm0weFVFWkZPR3QzY1c0eVpUTktTazR4VWpsek9HTm9SRWgyZDFZMUswNXdNR1JwV2tJeVRGSm9OMlV5VGxWQlVXaFJOV2RLVFU5TUNtUmtZV2RQTWxKUlJUTmhaSGxXWWxoV1dqVndkV0kzYjBjNVJWUlJlREExY1hCRFR6aE9PRU5uV1VKWVNtUlRObkF3YTJaQlJ6bGlXV1ZoWWxkR1pIWUtOMW9yVDJaNWNsWlZhVTB3THpoRVptWlpSV2QyVm1ad0wwaGlRbkZRWTA0MU1HcEVjMWd2YUZoblZITTJja1pFYkdwR01rZE5SMjF1WVVVM2JubG9WUXByV0dSdWMzZHlXakJNVjBGeFMydEtMM3B6VjFSellraGlObUZFVUVaWmJtbElhVzlHWjBWU1UxSktkbVl2UkVsR1ZVRlBjbXM1T0U5bGVWRmlOM0Z5Q25SbVJFTTBVM1pVY21vMU5VcFJibEUwTWt0ek1sRkxRbWREZFc5R09HZDBTVmsxYWtobE0ySk9TREpOVHpsaGJXMXpXR2hGVFVwSWJ6Sk9SREl6VXpJS2NtZDZRbXBvZW14MFFXdGljelp4V25oV1pVcHlOemczYnpGWWEwbG9VM0ZCYkV3dlJUSlVWR1ZRV1ZwWU0xWlpaWGxQZFhOTFpXVjJRVTl1TUdWRk5RbzBOa05YWmxwVWNsTjBTMVZuV2xkNWMxQnNiVWhSTURaUFRWSkhiMnRzUms5TGRuQkNiRFpQT1RScVptRjZObkZRZWprclZHZGxPVzVQWVN0NlkwcFBDakpZUzNaQmIwZEJTemxOTjBFelVXMDRhelJOYUdkTVdtaHRNRzFNT0ZoeFlXeHRUVWRhVXpoWlkyTXdRVEJFV0RoaFVqQTVVRzF0VldoRlZYVlpRbU1LVldWUVRqZHdNR2RzVDJoNWNsWjRSazUyU2t4cU1XaE1SMlpEU0RsQ1VFZGFhbEJxVkdKNVVEQmtjVTFyTm1KUGRrUXZiVnBZY0VscFdUZDRRemR5YXdwTEsxUlJSR0l6WkVwRk56VnljbThyYlRZMU1XbFBOM0YyTVRNMlZsRldXaTh4Y25sdmJuSm5ZMVJpYXpKS1prOXNlVTA5Q2kwdExTMHRSVTVFSUZKVFFTQlFVa2xXUVZSRklFdEZXUzB0TFMwdENnPT0K
---
apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: task-kube2
  namespace: tekton-demo
spec:
  steps:
    - name: kube
      image: lachlanevenson/k8s-kubectl
      volumeMounts:
        - name: kubeconfig-volume
          mountPath: /root/.kube
      script: |
        #!/usr/bin/env sh
        kubectl --server=https://192.168.1.10:6443 get pods -A
  volumes:
    - name: kubeconfig-volume
      secret:
        secretName: key-for-kube
---
apiVersion: tekton.dev/v1beta1
kind: TaskRun
metadata:
  name: taskrun-kube2
  namespace: tekton-demo
spec:
  taskRef:
    name: task-kube2
